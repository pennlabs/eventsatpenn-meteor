<head>
  <title>events@penn</title>
  <link href="http://fonts.googleapis.com/css?family=Merriweather:400,700" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=News+Cycle:400,700" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>

<body>
  {{> topbar }}
  <div class='row' id='container'>
    {{renderPage}}
  </div>
  {{> footer }}
</body>

<template name='footer'>
<div id="footer">
  <div class="row">
    <div class="large-12 columns">
      <div id="footer-nav">
        <ul>
          <li><a href="mailto:marketing@thedp.com">Contact</a></li>
          <li>Run by <a href='http://thedp.com'><img class='logo' alt='The Daily Pennsylvanian' src='https://s3.amazonaws.com/eventsatpenn/thedp.png'></a></li>
          <li>Funded by the <a href='http://pennua.org'>UA</a></li>
        </ul>
      </div>
      <div id="footer-details">
        <p>Copyright &copy; 2013 PennApps Labs</p>
      </div>
    </div>
  </div>
</div>
</template>

<template name='topbar'>
  <div class="contain-to-grid">
    <nav class="top-bar">
      <ul class="title-area">
        <li class="name">
          <h1><a class="home" href="/">events@penn</a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>menu</span></a></li>
      </ul>
       <section class="top-bar-section">
          <ul class="left">
            <li class="has-form">
              <form class="search">
                <div class="row collapse">
                  <div class="small-10 columns">
                    <input id="searchbox" type="text" placeholder='Search'>
                  </div>
                  <div class="small-2 columns">
                    <button type='submit' href="#" class="alert button"><span class="icon icon-search"></span></button>
                  </div>
                </div>
              </form>
            </li>
          </ul>
       </section>
      <section class="top-bar-section">
        <ul class="right">
          {{#if currentUser }}
          <li><a href="/new" class="create"><span class="icon icon-plus"></span>Create Event</a></li>
          <li class="has-dropdown"><a class="user" href="/user/{{ currentUser._id }}">{{ currentUser.profile.name }}</a>
            <ul class="dropdown">
              <li><a href="#" class="logout">Logout</a><li>
            </ul>
          </li>
          {{else}}
          <li><a href='/login'>Login / Register</a></li>
          {{/if}}
        </ul>
      </section>
    </nav>
  </div>
</template>

<template name="events">
{{#each event_queue}}
{{> event }}
{{else}}
No upcoming events.
{{/each}}
</template>

<template name="category">
<div class='row'>
  <div class='large-3 columns sidebar'>
    {{> sidebar }}
  </div>
  <div class='large-9 columns'>
    {{#each events}}
    {{> event }}
    {{else}}
    There are no events in this category.
    {{/each}}
  </div>
</div>
</template>

<template name="search">
<div class='row'>
  <div class='large-3 columns sidebar'>
    {{> sidebar }}
  </div>
  <div class='large-9 columns'>
    {{#each found_events}}
    {{> event }}
    {{else}}
    No results found.
    {{/each}}
  </div>
</div>
</template>

<template name='after_date'>
<div class='row'>
  <div class='large-3 columns sidebar'>
    {{> sidebar }}
  </div>
  <div class='large-9 columns'>
    {{#each events }}
    {{> event }}
    {{else}}
    No events after this date are scheduled.
    {{/each}}
  </div>
</div>
</template>

<template name='all'>
<div class='row'>
  <div class='large-3 columns sidebar'>
    {{> sidebar }}
  </div>
  <div class='large-9 columns'>
    {{#each all_events}}
    {{> event }}
    {{else}}
    No upcoming events.
    {{/each}}
  </div>
</div>
</template>

<template name='sidebar'>
<div class="large-12 columns sidebar-content">
  <form>
    <h5>Date</h5>
    <input class='date' value="{{ after_date }}" type="date" placeholder="mm/dd/yyyy" />
    <hr/>
    <h5>Categories</h5>
    {{#each categories }}
      <label><input {{ checked . }} class='category-checkbox' type="checkbox" value='{{ escape_category . }}'>{{ . }}</label>
    {{/each}}
  </form>
  <h6><a target='_blank' href='http://twitter.com/@_EventsAtPenn'>Follow @_EventsAtPenn</a></h6>
  <h6><a target='_blank' href='https://www.facebook.com/eventsatpenn'>Like EventsatPenn</a></h6>
</div>
<div class="large-12 columns sidebar-fold">
  <!--<span class="arrow"></span>-->
  <h5>Filters</h5> </div>
</template>

<template name='event_form'>
<form class="left box large-12 small-12 create-event" method="post" action="/new">
  <label>Name</label>
  <input required name="name" type="text" value='{{ name }}' placeholder="Event Name" />
  <div class="from">
    <label>From</label>
    <div class="row">
      <div class="large-4 columns">
        <input required name="date_start" type="date" value='{{ date_start }}' placeholder="mm/dd/yyyy" />
      </div>
      <div class="large-4 columns">
        <input required name="time_start" type="time" value='{{ time_start }}' placeholder="hh:mm" />
      </div>
      <div class="large-4 columns">
      </div>
    </div>
  </div>
  <div class="to">
    <label>To</label>
    <div class="row">
      <div class="large-4 columns">
        <input required name="date_end" type="date" value='{{ date_end }}' placeholder="mm/dd/yyyy" />
      </div>
      <div class="large-4 columns">
        <input required name="time_end" type="time" value='{{ time_end }}' placeholder="hh:mm" />
      </div>
      <div class="large-4 columns">
      </div>
    </div>
   </div>
  <label>Location</label>
  <input required name="location" type="text" value='{{ location }}' placeholder="Location" />
  <label>Description of event to make it more easily searchable</label>
  <textarea required name="description" placeholder="Make sure to note ticket prices, whether or not free food or stuff is available, and any other relevant info.">{{ description }}</textarea>
  <div class='row'>
    <div class='small-8 columns'>
      <label>Categories</label>
      <select name='categories' data-placeholder="Categorize your event" multiple="" class="categories-chooser chosen-select-width">
        {{#each cats categories }}
        <option value='{{ name }}' {{ selected . }}>{{ name }}</option>
        {{/each}}
      </select>
    </div>
    <div class='small-4 columns'>
      <label class='filename'>Event Photo</label>
      <input type='button' name='image' value='Pick photo' class='expand filepicker button'>
    </div>
  </div>
  <input type='hidden' value='{{ _id }}' name='id'>
  <input type='hidden' value='{{ image_url }}' name='image_url'>
  <input class="button" type="submit" id="submit-button" value="Submit">
</form>
</template>

<template name='new'>
<div class="view-create">
  <div class="row">
    <div class="large-4 columns">
      <div class="right box large-12 small-12">
        <h3>Create New Event</h3>
        <p>Your event will be publicly available. Please respect the following rules. The Daily Pennsylvanian is not liable for the content of the events posted on events@penn and may remove them at its sole discretion.</p>
        <ol>
          <li>No obscene pictures or language.</li>
          <li>No promotion of illegal activities.</li>
          <li>Shirt and shoes required.</li>
        </ol>
      </div>
    </div>
    <div class="large-8 columns">
      {{> event_form empty_object }}
    </div>
  </div>
</div>
</template>

<template name='event_info'>
  {{> event info }}
</template>

<template name='event'>
<div class='row'>
  <div class='large-12 columns card'>
  {{# if editing _id }}
    {{> edit_event }}
  {{else}}
    {{> show_event }}
  {{/if}}
  </div>
</div>
</template>

<template name='edit_event'>
<div class='row'>
  <div class="large-3 columns image">
    <img src="{{ image_url }}">
  </div>
  <div class="large-9 columns info">
    {{> event_form }}
  </div>
</div>
</template>

<template name='show_event'>
<div class='row'>
  <div class="large-3 columns image">
    <img src='{{ image_url }}'>
    <!--<img src="http://placehold.it/240x240&amp;text=img">-->
  </div>
  <div class="large-9 columns info">
    <div class='right'>
    {{#if admin }}
      {{#if starred }}
        <span data-event_id='{{ _id }}' class='unstar top-right'>Unstar</span>
      {{else}}
        <span data-event_id='{{ _id }}' class='star top-right'>Star</span>
      {{/if}}
    {{else}}
      {{#if starred }}
        <span class='top-right'>Featured by <a href='/user/{{ starred.by_id }}'>{{ starred.by }}</a></span>
      {{/if}}
    {{/if}}
    {{#if mine }}
      <a data-event_id='{{ _id }}' href='#' class='delete top-right'>Delete</a>
      <a data-event_id='{{ _id }}' href='#' class='edit top-right'>Edit</a>
    {{/if}}
    </div>
    <h4 class="title"><a class='event' href="/event/{{ _id }}">{{ name }}</a></h4>

    <span class="subtitle">Posted by <a class='creator' href="/user/{{ creator }}">{{ creator_name }}</a></span>

    <div class="detail-row">
      <div class="large-12 columns item">
        <span class="icon icon-clock"></span>{{ when }}
      </div>
      <div class="large-12 columns item">
        <span class="icon icon-location"></span><a href='#'>{{ location }}</a>
      </div>
    </div>
    <p>{{ description }}</p>
    <ul class='categories'>
      {{#each categories }}
      <li class='category'><a href='/category/{{ escape_category . }}'>{{ . }}</a></li>
      {{/each}}
    </ul>
  </div>
</div>
</template>

<template name='user'>
<div class="view-user">
  <div class="profile row">
    <div class="large-9 columns info">
      {{#with info}}
      <h2 class="title">{{ profile.name }}</h2>
      <hr/>
      <p>{{ profile.description }}</p>
      {{/with}}
    </div>
    <div class="large-3 columns actions">
      {{#if following }}
      <a class="unfollow item" href="#"><span class="icon icon-mail-2"></span>Unfollow</a>
      {{else}}
      <a class="follow item" href="#"><span class="icon icon-mail-2"></span>Follow</a>
      {{/if}}
      <a class="item" href="#">
        <span class="icon icon-facebook-2"></span>Facebook Page
      </a>
      <a class="item" href="#">
        <span class="icon icon-calendar-2"></span>Google Calendar
      </a>
    </div>
  </div>
  {{#each user_events }}
  {{> event }}
  {{else}}
  This user has not created any events.
  {{/each}}
</div>
</template>

<template name='login'>
<div class="row view-login">
  <div class="large-4 columns">
    <div class="large-12 prompt">
      <p>already have an account?</p>
    </div>
    <form id="login-form" class="login large-12" method="post" action="login">
      <h3>Login</h3>
      <input type='button' class='fb button' value='Login with Facebook'>
      <div class='or'>or</div>
      <input name="email" type="text" placeholder="Email" />
      <input name="password" type="password" placeholder="Password" />
      <input class="{{ login_class }} button" type="submit" id="login-button" value="{{ login_error }}">
    </form>
  </div>
  
  <div class="large-8 columns">
    <div class="large-12 prompt">
      <p>need a new account?</p>
    </div>
    <form id="register-form" class="signup large-12" method="post" action="api/users/">
      <h3>Sign Up</h3>
      <label>Name</label>
      <div class="row">
        <div class="large-12 columns">
          <input name="name" type="text" placeholder="Full Name" />
        </div>
      </div>
      <label>UPenn Email</label>
      <input name="email" pattern='(.*)upenn\.edu$' type="text" placeholder="" />
      <label>Password</label>
      <div class="row">
        <div class="large-6 columns">
          <input name="password" type="password" placeholder="Enter Password" />
        </div>
        <div class="large-6 columns">
          <input name="confirm" type="password" placeholder="Confirm Password" />
        </div>
      </div>
      <label>Description</label>
      <textarea name="description" placeholder="Your club and position within it, any other relevant information"></textarea>
      
      <input class="button" type="submit" id="register-button" value="Register">
    </form>
  </div>
</div>
</template>
