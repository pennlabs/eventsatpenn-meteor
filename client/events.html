<head>
  <title>events@penn</title>
  <link href="http://fonts.googleapis.com/css?family=Merriweather:400,700" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=News+Cycle:400,700" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>

<body>
  {{> topbar }}
  <div class='row' id='container'>
    {{renderPage}}
  </div>
</body>

<template name='topbar'>
  <div class="contain-to-grid">
    <nav class="top-bar">
      <ul class="title-area">
        <li class="name">
          <h1><a class="home" href="/">events@penn</a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>menu</span></a></li>
      </ul>
       <section class="top-bar-section">
          <ul class="left">
             <li class="has-form">
          <form class="search">
            <div class="row collapse">
              <div class="small-10 columns">
                <input id="searchbox" type="text" placeholder='Search'>
              </div>
              <div class="small-2 columns">
                <button type='submit' href="#" class="alert button"><span class="icon icon-search"></span></button>
              </div>
            </div>
          </form>
        </li>
      </ul>
       </section>
      <section class="top-bar-section">
        <ul class="right">
          <li><a href="/all">All Events</a></li>
          <li class="divider"></li>
          {{#if currentUser }}
          <li><a href="/new" class="create"><span class="icon icon-plus"></span>Create Event</a></li>
          <li class="has-dropdown"><a class="user" href="/user/{{ currentUser._id }}">{{ currentUser.profile.full_name }}</a>
            <ul class="dropdown">
              <li><a href="#" class="logout">Logout</a><li>
            </ul>
          </li>
          {{else}}
          <li><a href='/login'>Login / Register</a></li>
          {{/if}}
        </ul>
      </section>
    </nav>
  </div>
</template>

<template name="events">
{{#each event_queue}}
{{> event }}
{{else}}
No upcoming events.
{{/each}}
</template>

<template name="search">
{{#each found_events}}
{{> event }}
{{else}}
No results found.
{{/each}}
</template>

<template name='all'>
{{#each all_events}}
{{> event }}
{{else}}
No upcoming events.
{{/each}}
</template>

<template name='event_form'>
<form class="left box large-12 small-12 create-event" method="post" action="/new">
  <label>Name</label>
  <input name="name" type="text" value='{{ name }}' placeholder="Event Name" />
  <div class="row">
    <div class="large-6 columns">
      <label>Date</label>
      <input name="date" type="date" value='{{ date }}' placeholder="mm/dd/yyyy" />
    </div>
    <div class="large-3 small-6 columns">
      <label>Start Time</label>
      <input name="time_start" type="time" value='{{ time_start }}' placeholder="hh:mm" />
    </div>
    <div class="large-3 small-6 columns">
      <label>End Time</label>
      <input name="time_end" type="time" value='{{ time_end }}' placeholder="hh:mm" />
    </div>
  </div>
  <label>Location</label>
  <input name="location" type="text" value='{{ location }}' placeholder="Location" />
  <label>Description</label>
  <textarea name="description" placeholder="Describe your event to make it more easily searchable">{{ description }}</textarea>
  <div class='row'>
    <div class='small-8 columns'>
      <label>Categories</label>
      <textarea></textarea>
    </div>
    <div class='small-4 columns'>
      <label class='filename'>Event Photo</label>
      <input type='button' name='image' value='Pick photo' class='expand filepicker button'>
    </div>
  </div>
  <input type='hidden' value='{{ _id }}' name='id'>
  <input type='hidden' value='{{ image_url }}' name='image_url'>
  <input class="button" type="submit" id="submit-button" value="Submit">
</form>
</template>

<template name='new'>
<div class="view-create">
  <div class="row">
    <div class="large-4 columns">
      <div class="right box large-12 small-12">
        <h3>Create New Event</h3>
        <p>Your event will be publicly available. Please respect the following rules. Any posts that violate these rules will be moderated and removed.</p>
        <ol>
          <li>No obscene pictures or languages.</li>
          <li>Shirts and shoes required.</li>
          <li>Don't be an asshole.</li>
        </ol>
      </div>
    </div>
    <div class="large-8 columns">
      {{> event_form empty_object }}
    </div>
  </div>
</div>
</template>

<template name='event_info'>
  {{> event info }}
</template>

<template name='event'>
<div class='row'>
  <div class='large-12 columns card'>
  {{# if editing _id }}
    {{> edit_event }}
  {{else}}
    {{> show_event }}
  {{/if}}
  </div>
</div>
</template>

<template name='edit_event'>
<div class='row'>
  <div class="large-3 columns image">
    <img src="{{ image_url }}">
  </div>
  <div class="large-9 columns info">
    {{> event_form }}
  </div>
</div>
</template>

<template name='show_event'>
<div class='row'>
  <div class="large-3 columns image">
    <img src='{{ image_url }}'>
    <!--<img src="http://placehold.it/240x240&amp;text=img">-->
  </div>
  <div class="large-9 columns info">
    {{#if admin}}
      <div class='right'>
      {{#if starred _id }}
        <span data-event_id='{{ _id }}' class='unpromote'>&#9733;</span>
      {{else}}
        <span data-event_id='{{ _id }}' class='promote'>&#9733;</span>
      {{/if}}
      </div>
    {{/if}}
    {{#if mine _id }}
      <div class='right'>
        <a data-event_id='{{ _id }}' href='#' class='edit'>Edit</a>
      </div>
    {{/if}}
    <h4 class="title"><a class='event' href="/event/{{ _id }}">{{ name }}</a></h4>

    <span class="subtitle">Hosted by <a class='creator' href="/user/{{ creator }}">{{ creator_name }}</a></span>

    <div class="detail-row">
      <div class="large-12 columns item">
        <span class="icon icon-clock"></span>{{ when }}
      </div>
      <div class="large-12 columns item">
        <span class="icon icon-location"></span><a href="http://maps.google.com/?q={{ location }}" target="_blank">{{ location }}</a>
      </div>
    </div>
    <p>{{ description }}</p>
  </div>
</div>
</template>

<template name='user'>
<div class="view-user">
  <!-- Profile -->
  <div class="profile row">
    <div class="large-9 columns info">
      {{#with info}}
      <h2 class="title">{{ profile.full_name }}</h2>
      <hr/>
      <p>{{ profile.description }}</p>
      {{/with}}
    </div>
    <div class="large-3 columns actions">
      {{#if following }}
      <a class="unfollow item" href="#"><span class="icon icon-mail-2"></span>Unfollow</a>
      {{else}}
      <a class="follow item" href="#"><span class="icon icon-mail-2"></span>Follow</a>
      {{/if}}
      <a class="item" href="#">
        <span class="icon icon-facebook-2"></span>Facebook Page
      </a>
      <a class="item" href="#">
        <span class="icon icon-calendar-2"></span>Google Calendar
      </a>
    </div>
  </div>
  {{#each user_events }}
  {{> event }}
  {{else}}
  This user has not created any events.
  {{/each}}
</div>
</template>

<template name='login'>
<div class="row view-login">
  <div class="large-4 columns">
    <div class="large-12 prompt">
      <p>already have an account?</p>
    </div>
    <form id="login-form" class="login large-12" method="post" action="login">
      <h3>Login</h3>
      <input name="email" type="text" placeholder="Email" />
      <input name="password" type="password" placeholder="Password" />
      <input class="button" type="submit" id="login-button" value="Login">
    </form>
  </div>
  
  <div class="large-8 columns">
    <div class="large-12 prompt">
      <p>need a new account?</p>
    </div>
    <form id="register-form" class="signup large-12" method="post" action="api/users/">
      <h3>Sign Up</h3>
      <label>Name</label>
      <div class="row">
        <div class="large-12 columns">
          <input name="full_name" type="text" placeholder="Full Name" />
        </div>
      </div>
      <label>UPenn Email</label>
      <input name="email" type="text" placeholder="" />
      <label>Password</label>
      <div class="row">
        <div class="large-6 columns">
          <input name="password" type="password" placeholder="Enter Password" />
        </div>
        <div class="large-6 columns">
          <input name="confirm" type="password" placeholder="Confirm Password" />
        </div>
      </div>
      <label>Description</label>
      <textarea name="description" placeholder=""></textarea>
      
      <input class="button" type="submit" id="register-button" value="Register">
    </form>
  </div>
</div>
</template>
